<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Document</title>
</head>

<body>
	<h1 id="main-heading">Виселица!</h1>
	<canvas id="canvas" width="400" height="400"></canvas>
	<script>
		let canvas = document.getElementById('canvas');
		let ctx = canvas.getContext('2d');
		// Создайте здесь свои функции
		const words = [
			"программа",
			"макака",
			"прекрасный",
			"оладушек",
			"веселый",
			"паприка",
			"фиолетовый",
			"капуста"
		];
		// фнк-ия сравнения двух масивов
		function areArraysSame(arr1, arr2) {
			if (arr1.length !== arr2.length) {
				return false;
			} else {
				for (let i = 0; i < arr1.length; i++) {
					if (arr1[i] !== arr2[i]) {
						return false;
					}
				}
				return true;
			}
		}
		// функция выбора случайного слова
		let pickWord = function () {
			return words[Math.floor(Math.random() * words.length)];
		};

		// Возвращает массив для заданного слова word в виде "_ _ _ _"
		let setupAnswerArray = function (word) {
			let tempArray = [];
			for (let i = 0; i < word.length; i++) {
				tempArray[i] = "_";
			}
			return tempArray;
		};

		// Отображает текущее состояние загаданного слова на странице
		let showPlayerProgress = function (answerArray) {
			// alert("Загаданное слово: " + answerArray.join(" ")); // вариант отображения через alert
			headingElement.innerHTML = answerArray.join(" ");
		};

		// Запрашивает ответ игрока с помощью prompt
		let getGuess = function () {
			let tempLetter = prompt("Угадайте букву либо нажмите отмена для выхода из игры.").toLowerCase();
			return tempLetter;
		};

		let updateGameState = function (guess, word, answerArray) {
			// Обновляет answerArray согласно ответу игрока (guess)
			// возвращает число, обозначающее, сколько раз буква guess
			// встречается в слове, чтобы можно было обновить значение
			// remainingLetters
			let guessLetters = 0;
			for (let j = 0; j < word.length; j++) {
				if (word[j] === guess) {
					answerArray[j] = guess;
					guessLetters++;
				}
			}
			return guessLetters;
		};

		let showAnswerAndCongratulatePlayer = function (answerArray) {
			// С помощью alert показывает игроку отгаданное слово
			// и поздравляет его с победой
			// alert(answerArray.join(" "));
			// alert("Отлично! Было загадано слово _" + word + "_");
			headingElement.innerHTML = answerArray.join(" ");
		};

		///////////// GAME
		alert(
			"Добро пожаловать в игру Виселица, сейчас будет загаданно слово, и вы должны будете угадать его, за каждый ход вы можете угадать только одну букву. Пгнали!"
		);

		let headingElement = document.getElementById("main-heading");
		// word: загаданное слово +
		let word = pickWord();
		// answerArray: итоговый массив +
		let answerArray = setupAnswerArray(word);
		// remainingLetters: сколько букв осталось угадатьs
		let remainingLetters = word.length;
		while (remainingLetters > 0) {
			showPlayerProgress(answerArray); // +
			// guess: ответ игрока
			let guess = getGuess(); // +
			if (guess === null) {
				break;
			} else if (guess.length !== 1) {
				alert("Пожалуйста, введите одиночную букву.");
			} else {
				// correctGuesses: количество открытых букв
				let correctGuesses = updateGameState(guess, word,
					answerArray);
				remainingLetters -= correctGuesses;
			}
		}
		showAnswerAndCongratulatePlayer(answerArray);
	</script>
</body>

</html>